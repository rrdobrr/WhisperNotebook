# Чек-лист разработки WhisperTranscriber Web Service

## 1. Обработка файлов и медиа
- [ ] Загрузка аудиофайлов любого формата (mp3, wav, flac, m4a, ogg и др.)
- [ ] Загрузка видеофайлов любого формата (mp4, mkv, mov, avi, webm и др.)
- [ ] Загрузка по ссылкам YouTube
- [ ] Скачивание видео с YouTube (yt-dlp)
- [ ] Извлечение аудиодорожки из видео (ffmpeg)
- [ ] Максимальное сжатие аудиодорожки без потери качества перед транскрибацией
- [ ] Очередь файлов для последовательной обработки множественных загрузок
- [ ] Отображение прогресса обработки каждого файла

## 2. Транскрибация
- [ ] Интеграция faster-whisper для локальной транскрибации
- [ ] Интеграция OpenAI Whisper API для облачной транскрибации
- [ ] Переключатель выбора метода транскрибации (локальный/API)
- [ ] Пометки о скорости и приватности каждого метода
- [ ] Выбор языка транскрибации вручную (выпадающий список)
- [ ] Опция добавления таймкодов в транскрипцию
- [ ] Автоопределение языка (опционально)
- [ ] Отображение статуса транскрибации в реальном времени

## 3. Настройки и API ключи
- [ ] Страница настроек
- [ ] Поле ввода OpenAI API key
- [ ] Безопасное хранение API ключа в БД (зашифрованное)
- [ ] Уведомление при попытке использовать API без введенного ключа
- [ ] Валидация API ключа при вводе

## 4. Текстовый редактор результатов
- [ ] Markdown редактор в окне результата транскрибации
- [ ] Кнопка автоматической саммаризации через ChatGPT
- [ ] Кнопка/поле для кастомной обработки текста (отправка промпта)
- [ ] Копирование текста в один клик
- [ ] Функция поиска внутри текста (Ctrl+F)
- [ ] Подсветка синтаксиса Markdown
- [ ] Автосохранение изменений

## 5. Управление текстами
- [ ] База данных SQLite с таблицей для хранения текстов
- [ ] CRUD операции для текстов (создание, чтение, обновление, удаление)
- [ ] Список всех сохраненных текстов
- [ ] Функция глобального поиска по всем текстам
- [ ] Метаданные: название, дата создания, дата изменения, источник файла
- [ ] Фильтрация и сортировка текстов

## 6. Чат с LLM
- [ ] Создание новых переписок (чатов)
- [ ] Панель переписок слева от чата
- [ ] Удаление переписок
- [ ] Переименование переписок
- [ ] Отправка сообщений в чат
- [ ] Стриминг ответов от LLM (Server-Sent Events)
- [ ] Выбор модели в выпадающем списке (gpt-4, gpt-3.5-turbo и др.)
- [ ] Сохранение истории переписок в БД
- [ ] Отображение токенов и стоимости для каждого сообщения

## 7. Интеграция текстов в чат
- [ ] Переключатель на панели: "Переписки" ↔ "Тексты"
- [ ] Отображение списка текстов в панели
- [ ] Drag & Drop текстов для прикрепления к сообщению
- [ ] Возможность прикрепить несколько текстов
- [ ] Визуальное отображение прикрепленных текстов
- [ ] Форматирование прикрепленных текстов в промпте: "Текстовое вложение N"
- [ ] Открепление текстов перед отправкой

## 8. Темы оформления
- [ ] Светлая тема
- [ ] Темная тема
- [ ] Переключатель темы (toggle)
- [ ] Сохранение выбора темы в localStorage

## 9. Мониторинг затрат
- [ ] Подсчет расходов на OpenAI API для Whisper
- [ ] Подсчет расходов на OpenAI API для ChatGPT
- [ ] Раздельное отображение затрат (Whisper / ChatGPT)
- [ ] Расчет затрат на Railway (CPU, RAM, storage)
- [ ] Отображение текущего баланса OpenAI API
- [ ] История транзакций/использования
- [ ] Экспорт статистики

## 10. База данных (SQLite)
- [ ] Таблица пользователей (если нужна авторизация) или настройки
- [ ] Таблица транскрипций
- [ ] Таблица переписок (chats)
- [ ] Таблица сообщений (messages)
- [ ] Таблица вложений текстов (attachments)
- [ ] Таблица затрат (costs)
- [ ] Миграции БД (Alembic)

## 11. Backend API (FastAPI)
- [ ] Эндпоинт загрузки файлов (audio/video)
- [ ] Эндпоинт загрузки по YouTube ссылке
- [ ] Эндпоинт запуска транскрибации
- [ ] Эндпоинт получения статуса обработки
- [ ] Эндпоинты CRUD для текстов
- [ ] Эндпоинты CRUD для чатов
- [ ] Эндпоинт отправки сообщения в чат (с стримингом)
- [ ] Эндпоинт саммаризации текста
- [ ] Эндпоинт кастомной обработки текста
- [ ] Эндпоинт получения статистики затрат
- [ ] Эндпоинт сохранения/получения настроек
- [ ] Эндпоинт проверки баланса OpenAI
- [ ] WebSocket или SSE для real-time обновлений

## 12. Frontend (React)
- [ ] Главная страница с загрузкой файлов
- [ ] Страница настроек
- [ ] Страница списка транскрипций
- [ ] Страница редактора текста
- [ ] Страница чата с LLM
- [ ] Страница мониторинга затрат
- [ ] Навигация между страницами
- [ ] Responsive дизайн
- [ ] Loading states и индикаторы прогресса
- [ ] Уведомления (toast notifications)
- [ ] Обработка ошибок

## 13. Деплой на Railway
- [ ] Dockerfile для бэкенда
- [ ] Dockerfile для фронтенда или статическая сборка
- [ ] railway.toml или railway.json
- [ ] Настройка переменных окружения
- [ ] Постоянное хранилище для SQLite и временных файлов
- [ ] Настройка ffmpeg в контейнере
- [ ] README с инструкциями по деплою

## 14. Дополнительные фичи
- [ ] Экспорт транскрипций в различные форматы (txt, srt, vtt, docx)
- [ ] Предпросмотр видео/аудио перед транскрибацией
- [ ] Возможность паузы/отмены транскрибации
- [ ] Batch processing нескольких файлов одновременно
- [ ] API документация (Swagger UI)
- [ ] Логирование и мониторинг ошибок
- [ ] Rate limiting для API
- [ ] Кэширование результатов

## 15. Безопасность и оптимизация
- [ ] Валидация загружаемых файлов (размер, тип)
- [ ] Очистка временных файлов после обработки
- [ ] Шифрование API ключей в БД
- [ ] CORS настройки
- [ ] Ограничение размера файлов
- [ ] Compression для API ответов
- [ ] Оптимизация запросов к БД
